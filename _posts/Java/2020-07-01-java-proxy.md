---
layout: post
title: 代理模式
category: Java
tags: [设计模式]
---

代理模式是面向对象编程中比较常见的设计模式。在Java中分为静态代理、动态代理，其中动态代理又可以分为JDK动态代理、cglib动态代理。

## 一、静态代理

- 接口
- 目标对象
- 代理对象

- 优点： 代理对象与目标对象要实现相同的接口，可以做到在不修改目标对象的基础上，对程序功能进行扩展。
- 缺点： 一旦接口增加或者减少方法，那么目标对象和代理对象都需要维护。

举例：
```java

```

## 二、动态代理


### 1、JDK动态代理

代理对象，不需要实现接口，目标对象一定要实现接口，利用JDK的API动态的在内存中构建代理对象。

动态代理的代理类是实现了一个InvocationHandler的接口，通过reflect.Proxy的类的newProxyInstance方法就可以得到这个接口的实例，然后再来
作为参数传递进去，这里每一个在代理类上处理的东西也会被重定向到调用处理器上。



### 2、cglib动态代理

静态代理和JDK动态代理都要求 目标对象 是实现一个接口的目标对象。但有时目标对象只是一个单独的对象，没有实现任何接口，这个时候就可以使用以目标对象子类
的方式实现代理，这种方法叫做Cglib代理。

Cglib包的底层是通过使用字节码处理框架ASM来转换字节码并生成新的类。


举例：
```java

```